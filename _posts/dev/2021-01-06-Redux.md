---
title: Redux
categories: [dev]
comments: true
---

# Redux

**Gombang** 프로젝트를 진행하며, 전역변수와 상태관리의 필요성을 느껴 접하게 된 라이브러리이다.

- 애플리케이션 상태를 관리하기위한 오픈 소스 JavaScript 라이브러리이다.
- MVC 패턴을 대체하기 위해서 페이스북이 사용한 `**Flux 패턴**`을 살짝 바꾼 것이다.
- 모든 것을 `**state**`로 관리한다.

### 데이터 흐름

```jsx
View -> Action -> Dispatcher -> Store(Middleware -> Reducer) -> View
```

- 한 방향으로만 흐르기 때문에 데이터의 흐름을 예측하기 쉽고 관리하기 쉽다.
- 함수형 프로그래밍을 따르기 때문에 데이터가 불변하여 예측하기도 쉽고, 이전 상태로 되돌리기도 쉽다.

### React-Redux

- `**Action**`이 발생하면 감지(Dispatcher)하여 State를 갱신한다.
- `**Store**`(상태관리장소)에서 상태를 관리하고 `React Component`에서 보여준다

### 활용

- 전역변수 상태 업데이트
- API 연결 시 반복적인 호출을 줄이기 위해 상태 저장 및 활용 가능

### Provider 생성

```jsx
import {createStore,combineReducers,Reducer,Store} from 'redux'
import {Provider} from 'react-redux'
import {queryReducers} from './Store/reducers';
...
const rootReducer:Reducer = combineReducers({
  query:queryReducers,
})
const store:Store = createStore(rootReducer)
export type RootState = ReturnType<typeof rootReducer>
...
const App =()=>{
  return (
    <Provider store={store}>
				...
    </Provider>
  );
};
...
```

### Action 정의

```jsx
export const CATEGORIES = "CATEGORIES";

export const categoryAction = (test: Array<string>) => {
  return {
    type: CATEGORIES,
    testArray: test,
  };
};
```

### Reducer 생성

```jsx
import { CATEGORIES } from "../actions";

const initState = {
  testArray: null,
};

export const queryReducers = (state = initState, action: any) => {
  switch (action.type) {
    case CATEGORIES:
      return {
        ...state,
        testArray: action.testArray,
      };

    default:
      return state;
  }
};
```

`

### Action Dispatch

```jsx
import {useDispatch} from 'react-redux'
import { categoryAction } from '~/Store/actions';
...
const dispatch = useDispatch()
  const storeCategories=(testArray:Array<string>)=>{
    dispatch(categoryAction(testArray))
  }
...
```

### State 활용

```jsx
const categories = useSelector((state) => state.query.testArray);
```

### 적용 Github Repository

[React Native 프로젝트](https://github.com/haena3230/Gombang)에 Redux를 활용하여 전역변수로 사용했다.
