---
title: WebService
categories: [Web]
comments: true
---

웹 서비스와 웹 사이트, WebAPI등과 같이 헷갈릴 수 있는 개념을 정리해 두기 위해 작성했습니다.

키워드 - **플랫폼중심, 독립성, 비즈니스 로직의 한 영역**

## 웹서비스 사용 이유

현재 애플리케이션은 PC, 모바일, 태블릿 등의 다양한 기기를 통해 제공되기 때문에, 하나의 서비스를 다양한 클라이언트가 사용할 수 있어야 합니다. 플랫폼에 상관없이 기능을 제공할 수 있는 서비스의 아키텍처를 `SOA(Service Oriented Architecture)` 라고 하며, 이를 실현시킨 것이 웹 서비스 입니다.

플랫폼과 서비스간의 결합도 외에도 발생하는 결합도를 고려해야 합니다. 클라이언트와 서버 간의 결합도를 줄이고 클라이언트와 서버가 독립적으로 발전할 수 있어야 합니다. 이러한 독립성은 유지보수 및 재사용성에 이점이 됩니다.,

## 웹서비스

웹사이트로 서비스를 해도 웹서비스라고 부를 수는 있겠지만, 웹서비스라고 하면 특정 프로토콜을 가지고 서비스 하는 방식을 의미합니다.

## 웹서비스 표준

- 객체 접근 프로토콜(SOAP)

객체를 연결하는데 사용된 프로토콜로, Simple Object Access Protocol 이 대표 프로토콜입니다. 접속을 담당하며 HTTP와 유사하고 이를 특화했다고 보면 됩니다.

내가 보내고자 하는 메시지를 포장하는 포장지로, 표준 포장 구조(standard packaging structure)라고 불리기도 합니다. → 서로 다른 플랫폼간의 통신을 편리하게 합니다.

XML은 정보를 구조적으로 조립할 수 있는 좋은 언어이기 때문에, XML속의 정보를 꺼내어 사용하기 편리합니다. 따라서 SOAP으로 감싸기 전에 XML으로 변환하고, SOAP에서 꺼낼 때 XML을 필요한 객체로 변환합니다.

이러한 변환을 **OXM(Object-XML Mapping)**이라고 부르고 대표적으로 JIBX,Castor, JAXB등이 있습니다.

- 웹 서비스 기술 언어(WSDL)

웹 서비스의 정보와 규약과 같은 내용을 기술하는 것으로, Web Service Descript Language이며 XML 기반입니다.

- 전역 비즈니스 레지스트리(UDDI)

정보들이 체계적으로 저장되어있는 universal description, discovery, and Integration입니다.

이러한 형태에서 출발하여 현재의 RESTful API라는 손쉽게 인터페이스 할 수 있는 개념이 나오게 되었습니다. 자원을 공유하고, 서비스를 교환하고, 그럼으로써 상호가 시너지와 더불어 개인이 참여하게끔하여 해당 서비스의 사용을 늘리고, 부가 서비스로써의 확대가 되기에 웹2.0 시대를 중요하게 장식했다고 볼 수 있습니다.

## 웹 서비스와 웹 API 차이점

웹 서비스

- W3C에서 정의한 모든 통신 및 데이터 교환은 XML을 기반으로 합니다.
- 정의된 표준 - WSDL
- 데이터를 압축할 수는 없지만, HTML 요청을 압축할 수는 있습니다.
- 예 : SOAP

웹 API

- 웹 API 통신 및 데이터 교환은 XML, JSON 또는 일반 데이터 일 수 있습니다.
- 정의된 표준 없음
- 데이터를 압축할 수 있습니다.
- 예 : REST

## 웹서비스 구조

웹 서비스의 서비스와 클라이언트는 어떠한 레이어로 구분하는 것이 아닌, 기능을 제공하고 제공받는 역할에 따라 구분됩니다. 반드시 `프로바이더` 는 비즈니스 로직의 구현체가 있고, `클라이언트`는 UI 구현만 있는 것이 아닙니다.

하나의 기능을 구현하기 위해 여러개의 웹 서비스가 호출될 수 있고, 클라이언트는 또 다른 웹 서비스를 제공하는 프로바이더가 될 수 있습니다.

따라서 웹 서비스는 **어딘가 위치한 비즈니스 로직의 한 영역**이라고 할 수 있습니다.

## 웹서비스 호출 방식

웹 서비스는 WSDL로부터 서비스를 요청하고 요청받는 구조입니다. 실무에서 클라이언트를 개발할 때, WSDL을 적용할 때에는 독립적으로 구현해야 합니다. 즉, 클라이언트의 핵심 로직에 웹 서비스를 부르는 통신 관련 로직이 많이 섞여 있다면, 서비스의 변경이 곧 클라이언트의 변경으로 연결되므로, 독립적으로 구현하는 것이 중요합니다.

이러한 구현을 위해 보편적으로 사용되는 것이 `프록시(Proxy) 패턴` 입니다.

프록시는 웹 서비스 통신을 위한 클래스 혹은 라이브러리의 집합으로, 클라이트의 비즈니스 로직과 통신 관련 로직을 분리합니다. 따라서 클라이언트 로직에서 서비스를 호출할 때는 이 프록시만 호출하고, 그 후의 통신을 모두 프록시에게 위임합니다.

프록시는 WSDL을 통해 생성할 수 있으며, java에서는 `wsimport` 혹은 `Maven plugin`을 통해 WSDL의 위치만 입력하면 손쉽게 프록시 파일 묶음을 얻을 수 있습니다.

하지만 프록시 패턴은 통신 모듈이 캡슐화되어 있기 대문에 개발자가 통신 오류에 관한 대비를 높치기 쉽다는 단점이 있습니다. 따라서 웹 서비스 통신에 관한 예외처리를 정확히 해주어야 합니다.

## 웹서비스 프레임워크

웹서비스 프레임워크는 OXM을 사용하고, SOAP바인딩을 실현시켜줍니다. Java 기반의 JAX-WS(Java API for XML - WebService)와 .NET 기반의 WCF(Windows Communication Foundation)이 있습니다.

프레임워크에서 웹 서비스의 WSDL의 생성과 SOAP 메시지의 바인딩 OXM등을 적용하여 웹서비스의 전반적인 과정을 처리해 줍니다.
[![WebserviceStructure](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fa671531-c8b4-405e-87d3-e756475ac0bd/Untitled.png)](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fa671531-c8b4-405e-87d3-e756475ac0bd/Untitled.png)

[그림1. 웹서비스 구조 정리. 출처:[https://www.nextree.co.kr/p11842/](https://www.nextree.co.kr/p11842/)]

출처 : 더 자세한 내용은 [다음](<[https://www.nextree.co.kr/p11842/](https://www.nextree.co.kr/p11842/)>)을 통해 확인할 수 있습니다.
